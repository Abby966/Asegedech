<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Donate â€“ Aged Care & Dignity Center</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    body { background:#f6f8fb; font-family:'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif; }
    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,0.9); }

    /* Photo stack */
    .swipe-card { position:relative; max-width:820px; margin:96px auto 16px; overflow:hidden; border-radius:20px; box-shadow:0 10px 30px rgba(2,6,23,.12); background:#000; }
    .swipe-photo { position:relative; width:100%; aspect-ratio:16/9; overflow:hidden; }
    .swipe-photo img { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
    .img-before { filter: grayscale(.05) contrast(.95) brightness(.98); }
    .img-after { clip-path: inset(0 calc(100% - var(--p,0%)) 0 0); transition: clip-path .06s linear; filter: saturate(1.1) contrast(1.05) brightness(1.05); }

    /* Compact overlay slider */
    .swipe-cta {
      position:absolute; left:50%; bottom:12px; transform:translateX(-50%);
      display:flex; align-items:center; gap:10px;
      padding:12px 20px; border-radius:999px;
      background:rgba(255,255,255,.92);
      border:3px solid rgba(2,6,23,.10);
      box-shadow:0 8px 18px rgba(15,23,42,.12); backdrop-filter:blur(6px);
    }
    .swipe-cta .cta-label { font-size:12px; font-weight:800; color:#0f172a; letter-spacing:.2px; white-space:nowrap; display:flex; align-items:center; gap:6px; }
    .swipe-cta input[type="range"] { width:240px; height:30px; appearance:none; -webkit-appearance:none; background:transparent; outline:none; }
    .swipe-cta input[type="range"]::-webkit-slider-runnable-track { height:12px; background:#e2e8f0; border-radius:999px; }
    .swipe-cta input[type="range"]::-moz-range-track { height:12px; background:#e2e8f0; border-radius:999px; }
    .swipe-cta input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance:none; appearance:none;
      width:32px; height:32px; border-radius:50%;
      background:#f97316; border:0; cursor:pointer;
      box-shadow:0 8px 22px rgba(249,115,22,.35);
      margin-top:-10px;
    }
    .swipe-cta input[type="range"]::-moz-range-thumb {
      width:32px; height:32px; border-radius:50%;
      background:#f97316; border:0; cursor:pointer;
    }

    .donation-form { max-width:520px; margin:16px auto 64px; background:#fff; padding:24px; border-radius:16px; box-shadow:0 10px 30px rgba(2,6,23,.08); }
  </style>
</head>
<body>
  <!-- Nav -->
  <header class="fixed inset-x-0 top-0 z-50">
    <nav class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="mt-4 mb-3 flex items-center justify-between rounded-2xl bg-white/90 glass shadow-soft px-4 py-2">
        <a href="index.html#home" class="flex items-center gap-3 group">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-orange-500 text-white shadow-soft">
            <i class="fa-solid fa-hands-holding-heart"></i>
          </span>
          <span class="font-semibold tracking-tight text-slate-900 group-hover:text-orange-600 transition">Aged Care & Dignity Center</span>
        </a>
        <ul class="hidden md:flex items-center gap-6 text-sm">
          <li><a class="hover:text-orange-600" href="index.html#Home">Home</a></li>
          <li><a class="hover:text-orange-600" href="index.html#services">Services</a></li>
          <li><a class="hover:text-orange-600" href="index.html#impact">Impact</a></li>
          <li><a class="hover:text-orange-600" href="index.html#gallery">Gallery</a></li>
          <li><a class="hover:text-orange-600" href="Volunteer.html">Volunteer</a></li>
          <li><a class="hover:text-orange-600" href="index.html#contact">Contact</a></li>
          <li><a class="rounded-full bg-orange-500 px-4 py-2 text-white" href="index.html#donate">Donate</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <main class="pt-20 md:pt-24">
    
    <!-- Donation form -->
    <div class="donation-form">
      <form id="donationForm" autocomplete="on">
        <div class="mb-4">
          <label for="phone" class="block font-semibold mb-1">Telebirr Number</label>
          <!-- accept 09xxxxxxxx OR +2519xxxxxxxx -->
          <input type="tel" id="phone" class="w-full border rounded px-3 py-2"
                 required placeholder="09xxxxxxxx or +2519xxxxxxxx"
                 pattern="^(0\d{9}|\+251\d{9})$" autocomplete="tel">
        </div>
        <div class="mb-4">
          <label for="amount" class="block font-semibold mb-1">Donation Amount (ETB)</label>
          <input type="number" id="amount" class="w-full border rounded px-3 py-2"
                 required min="10" step="10" placeholder="e.g., 100" inputmode="numeric">
        </div>
      </form>
      <p class="text-center text-slate-500 text-sm">Prefer offline? Telebirr: <strong>09xx xxx xxx</strong></p>
      <div id="thanks" class="mt-3 hidden rounded-lg bg-green-50 p-3 text-green-800 text-sm">ðŸŽ‰ Thank you! Weâ€™ll confirm via your phone shortly.</div>
    </div>
    <!-- Before/After image with overlayed mini slider -->
    <div class="swipe-card">
      <div class="swipe-photo" id="photoWrap">
        <img src="rnf91vdl.png" alt="Before" class="img-before" />
        <img src="wd9n1fsx.png" alt="After" class="img-after" id="afterImg" />
      </div>

      <div class="swipe-cta" id="swipeCta">
        <span class="cta-label"><i class="fa-solid fa-hand-holding-heart text-orange-500"></i> Swipe to pay</span>
        <span id="ctaError" class="text-[11px] font-semibold text-red-700 bg-red-50 border border-red-200 rounded-full px-2 py-0.5 hidden">Please enter information</span>
        <input type="range" id="swipeRange" min="0" max="100" value="0" aria-label="Swipe to pay" />
      </div>
    </div>

  </main>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <script>
    const range    = document.getElementById('swipeRange');
    const afterImg = document.getElementById('afterImg');
    const thanks   = document.getElementById('thanks');
    const phone    = document.getElementById('phone');
    const amount   = document.getElementById('amount');
    const ctaError = document.getElementById('ctaError');
    const cta      = document.getElementById('swipeCta');

    let revertTimer;

    // Accept 09xxxxxxxx OR +2519xxxxxxxx
    const phoneRe = /^(0\d{9}|\+251\d{9})$/;

    function formValid(){
      const tel = (phone.value || '').trim();
      const telOK = phoneRe.test(tel);
      const amtOK = Number(amount.value) >= 10;
      return telOK && amtOK;
    }
    function updateSwipeState(){
      const ok = formValid();
      range.disabled = !ok;
      cta.classList.toggle('opacity-60', !ok);
    }
    function showCtaError(){
      ctaError.textContent = 'Please enter information';
      ctaError.classList.remove('hidden');
      setTimeout(()=> ctaError.classList.add('hidden'), 1500);
    }

    // Enable/disable on input & change (covers autofill)
    ['input','change'].forEach(evt=>{
      phone.addEventListener(evt, updateSwipeState);
      amount.addEventListener(evt, updateSwipeState);
    });

    // Show message if user taps CTA while disabled
    cta.addEventListener('click', (e)=>{ if(range.disabled) { e.preventDefault(); showCtaError(); } });

    // Slider interaction
    range.addEventListener('input', (e)=>{
      if(range.disabled){
        e.preventDefault();
        range.value = 0;
        return showCtaError();
      }
      const p = Number(e.target.value);
      afterImg.style.setProperty('--p', p + '%');

      if (p >= 98){
        range.value = 100;
        range.disabled = true;
        confetti({ particleCount: 160, spread: 70, origin: { y: 0.6 } });
        thanks.classList.remove('hidden');
        setTimeout(()=> thanks.classList.add('hidden'), 2000);

        clearTimeout(revertTimer);
        // revert exactly after 5 minutes
        revertTimer = setTimeout(()=>{
          afterImg.style.setProperty('--p', '0%');
          range.value = 0;
          range.disabled = !formValid();
        }, 300000);
      }
    });

    // Initial state (handles autofill on load)
    updateSwipeState();
    // If browser autocompletes after a tick
    setTimeout(updateSwipeState, 250);
  </script>
</body>
</html>
